const PURITY_KEYWORD="purity",DATA_PURITY_FLAG="data-purity_flag";export const init=t=>{const e=t;let r,o;function n(t,e){for(const{name:e}of t.attributes)t.removeAttribute(e);for(const{name:r,value:o}of e.node.attributes)t.setAttribute(r,o)}function s(){const t=r();console.warn("ðŸŒ€");for(const[e,r]of o){const o=t.get(e);if(o&&r.shallow.outerHTML!==o.shallow.outerHTML){const t=document.getElementById(e);if(!t)throw new Error(`There is no element in the DOM with id "${e}".`);n(t,o),r.shallow.innerHTML!==o.shallow.innerHTML?(t.innerHTML=o.node.innerHTML,console.warn(`\tâ†» #${e}`)):console.warn(`\tÂ± #${e}`)}}o=t}return{mount:function(t){r=()=>(t=>{const e=(new DOMParser).parseFromString(t,"text/html"),r=new Map;for(const t of e.querySelectorAll("[id]")){const e=t.cloneNode(!0);for(const t of e.querySelectorAll("[id]"))t.outerHTML=`\x3c!-- ${t.tagName}#${t.id} --\x3e`;for(const t of e.querySelectorAll("[data-purity_flag]"))for(const e in t.dataset)e.startsWith("purity")&&t.removeAttribute(`data-${e}`);r.set(t.id,{node:t,shallow:e})}return r})(t()),o=r();const e=o.keys().next().value,n=document.getElementById(e),s=o.get(e)?.node;if(!n||!s)throw new Error(`Root DOM element's id does not correspond to the defined application root id "${e}".`);n.replaceWith(s)},rerender:s,getState:()=>e,setState(t){Object.assign(e,t(e)),s()}}};const ARGS_RE=/__\[(\d+)\]__/gm,BOUND_EVENTS_RE=/::(\w+)\s*=\s*__\[(\d+)\]__/gm;export const isTruthy=t=>null!=t&&!1!==t;const clearFalsy=t=>isTruthy(t)?t:"",joinIfArray=t=>Array.isArray(t)?t.join(""):t,applyPurityKey=(()=>{let t,e=0;return()=>(t&&clearTimeout(t),t=setTimeout((()=>{e=0})),e++)})();export const render=([t,...e],...r)=>e.reduce(((t,e,r)=>`${t}__[${r}]__${e}`),t).replace(BOUND_EVENTS_RE,((t,e,o)=>{const n=`data-purity_${e}_${applyPurityKey()}`;return setTimeout((()=>{const t=document.querySelector(`[${n}]`),s=r[o];t&&"function"==typeof s&&(t[`on${e}`]=s,t.removeAttribute(n))})),`${n} data-purity_flag`})).replace(ARGS_RE,((t,e)=>{return joinIfArray((o=r[+e],isTruthy(o)?o:""));var o})).trim().replace(/\n\s*</g,"<").replace(/>\n\s*/g,">");
